<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <style>
        .box-container {
            width: 800px;
            margin: 0 auto;
        }

        .box {
            cursor: pointer;
            box-sizing: border-box;
            position: relative;
            width: 10%;
        }

        .box-image {
            position: relative;
            transition: transform 300ms ease-in;
            z-index: 1;
        }

        .box-image:hover {
            transform: scale(1.04);
            transition: transform 300ms ease-out;
        }

        .box-image:active {
            transform: scale(1);
        }

        .box-image-over-holder {
            position: absolute;
            top: 0;
            left: 0;
            z-index: 3;
            cursor: default;
        }

        .info-holder {
            position: absolute;
            width: 300px;
            bottom: -30px;
            left: 80px;
            z-index: 4;
        }

        .overlay {
            position: fixed;
            top: 0;
            right: 0;
            bottom: 0;
            left: 0;
            background-color: rgba(255, 255, 255, 0.85);
            z-index: 2;
        }

        .close {
            cursor: pointer;
            position: absolute;
            top: -20px;
            right: 0;
        }

        .fade-enter-active, .fade-leave-active {
            transition: opacity 400ms ease-in;
        }

        .fade-enter, .fade-leave-to /* .fade-leave-active below version 2.1.8 */
        {
            opacity: 0;
            transition: opacity 400ms ease-out;
        }
    </style>
</head>
<body>
<div id="root">
    <button @click="showAll">All</button>
    <button @click="showResidential">Residential</button>
    <button @click="showHospitality">Hospitality</button>
    <div class="box-container">
        <div v-for="box in filteredBoxes" class="box" :style="box.boxStyles">
            <img :src="box.image" class="box-image" @mousedown="toggleDetails(box)">
            <image-box :box="box" v-on:close-box="toggleDetails(box)"></image-box>
        </div>
    </div>
    <transition name="fade">
        <div class="overlay" v-if="showOverlay"></div>
    </transition>
</div>
<script src="https://unpkg.com/vue"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.js"></script>
<script src="js/masonry.pkgd.min.js"></script>
<script src="app/components/image-box.js"></script>
<script>
    let masonry;
    new Vue({
        el: '#root',
        data: {
            showOverlay: false,
            boxes: [
                {
                    title: "Image One",
                    location: "Location One",
                    url: "https://google.com",
                    image: "http://placehold.it/200x300/ff00ff",
                    cat: ['all', 'hospitality'],
                    boxStyles: {
                        paddingTop: '10px',
                        paddingRight: '10px',
                        paddingBottom: '10px',
                        paddingLeft: '10px',
                        width: "200px",
                        height: "300px"
                    },
                    showDetails: false
                },
                {
                    title: "Image Two",
                    location: "Location Two",
                    url: "https://google.com",
                    image: "http://placehold.it/150x220",
                    cat: ['all', 'residential'],
                    boxStyles: {
                        paddingTop: '10px',
                        paddingRight: '10px',
                        paddingBottom: '10px',
                        paddingLeft: '10px',
                        width: "150px",
                        height: "220px"
                    },
                    showDetails: false
                },
                {
                    title: "Image Three",
                    location: "Location Three",
                    url: "https://google.com",
                    image: "http://placehold.it/125x100",
                    cat: ['all', 'residential'],
                    boxStyles: {
                        paddingTop: '10px',
                        paddingRight: '10px',
                        paddingBottom: '10px',
                        paddingLeft: '10px',
                        width: "125px",
                        height: "100px"
                    },
                    showDetails: false
                },
                {
                    title: "Image Four",
                    location: "Location Four",
                    url: "https://google.com",
                    image: "http://placehold.it/150x150/ff00ff",
                    cat: ['all', 'hospitality'],
                    boxStyles: {
                        paddingTop: '10px',
                        paddingRight: '10px',
                        paddingBottom: '10px',
                        paddingLeft: '10px',
                        width: "150px",
                        height: "150px"
                    },
                    showDetails: false
                },
                {
                    title: "Image Five",
                    location: "Location Five",
                    url: "https://google.com",
                    image: "http://placehold.it/180x150",
                    cat: ['all', 'residential'],
                    boxStyles: {
                        paddingTop: '10px',
                        paddingRight: '10px',
                        paddingBottom: '10px',
                        paddingLeft: '10px',
                        width: "180px",
                        height: "150px"
                    },
                    showDetails: false
                }, {
                    title: "Image One",
                    location: "Location One",
                    url: "https://google.com",
                    image: "http://placehold.it/200x300/ff00ff",
                    cat: ['all', 'hospitality'],
                    boxStyles: {
                        paddingTop: '10px',
                        paddingRight: '10px',
                        paddingBottom: '10px',
                        paddingLeft: '10px',
                        width: "200px",
                        height: "300px"
                    },
                    showDetails: false
                },
                {
                    title: "Image Two",
                    location: "Location Two",
                    url: "https://google.com",
                    image: "http://placehold.it/250x170/ff00ff",
                    cat: ['all', 'hospitality'],
                    boxStyles: {
                        paddingTop: '10px',
                        paddingRight: '10px',
                        paddingBottom: '10px',
                        paddingLeft: '10px',
                        width: "250px",
                        height: "170px"
                    },
                    showDetails: false
                },
                {
                    title: "Image Three",
                    location: "Location Three",
                    url: "https://google.com",
                    image: "http://placehold.it/150x150/ff00ff",
                    cat: ['all', 'hospitality'],
                    boxStyles: {
                        paddingTop: '10px',
                        paddingRight: '10px',
                        paddingBottom: '10px',
                        paddingLeft: '10px',
                        width: "150px",
                        height: "150px"
                    },
                    showDetails: false
                },
                {
                    title: "Image Four",
                    location: "Location Four",
                    url: "https://google.com",
                    image: "http://placehold.it/450x250",
                    cat: ['all', 'residential'],
                    boxStyles: {
                        paddingTop: '10px',
                        paddingRight: '10px',
                        paddingBottom: '10px',
                        paddingLeft: '10px',
                        width: "450px",
                        height: "250px"
                    },
                    showDetails: false
                },
                {
                    title: "Image Five",
                    location: "Location Five",
                    url: "https://google.com",
                    image: "http://placehold.it/180x150/ff00ff",
                    cat: ['all', 'hospitality'],
                    boxStyles: {
                        paddingTop: '10px',
                        paddingRight: '10px',
                        paddingBottom: '10px',
                        paddingLeft: '10px',
                        width: "180px",
                        height: "150px"
                    },
                    showDetails: false
                },
            ],
            filteredBoxes: []
        },
        mounted: function () {
            this.filteredBoxes = this.filterBoxes('all');
            this.setPadding(this.filteredBoxes);
            this.$nextTick(function () {
                this.startMasonry();
            })
        },
        methods: {
            filterBoxes(category) {
                return this.boxes.filter(b => b.cat.some(c => c === category));
            },
            setPadding(boxes) {
                boxes.map(b => {
                    const top = Math.floor(Math.random() * 22 + 8);
                    const right = Math.floor(Math.random() * 22 + 8);
                    const bottom = Math.floor(Math.random() * 22 + 8);
                    const left = Math.floor(Math.random() * 22 + 8);
                    const currentWidth = parseInt(b.boxStyles.width);
                    const currentHeight = parseInt(b.boxStyles.height);
                    b.boxStyles.paddingTop = top + 'px';
                    b.boxStyles.paddingRight = right + 'px';
                    b.boxStyles.paddingBottom = bottom + 'px';
                    b.boxStyles.paddingLeft = left + 'px';
                    b.boxStyles.width = currentWidth + left + right + 'px';
                    b.boxStyles.height = currentHeight + top + bottom + 'px';
                });
                this.$nextTick(function () {
                    this.startMasonry();
                })
            },
            startMasonry() {
                masonry = $('.box-container').masonry({
                    itemSelector: '.box',
                    columnWidth: 25,
                });
                masonry.masonry('remove', '.box')
            },
            layoutMasonry() {
                masonry.masonry('once', 'removeComplete', function () {
                    masonry.masonry('reloadItems');
                    masonry.masonry('layout');
                });
                masonry.masonry('remove', '.box')
            },
            showAll() {
                this.filteredBoxes = this.filterBoxes('all');
                this.$nextTick(function () {
                    this.layoutMasonry();
                })
            },
            showResidential() {
                this.filteredBoxes = this.filterBoxes('residential');
                this.$nextTick(function () {
                    this.layoutMasonry();
                })
            },
            showHospitality() {
                this.filteredBoxes = this.filterBoxes('hospitality');
                this.$nextTick(function () {
                    this.layoutMasonry();
                })
            },
            toggleDetails(box) {
                box.showDetails = !box.showDetails;
                this.showOverlay = box.showDetails;
            }
        }
    });
</script>
</body>
</html>